<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>            Branch specific gitignores for Bioconductor package documentation      ~/      </title>




<meta name="description" content="For more background on this post, see thisthreadon the Bioc-devel mailing list. The short story is that I use HadleyWickham pkgdown package tobuild a website for my packages and then publish it on GitHub.">




<meta property="og:locale" content="en_GB">
<meta property="og:site_name" content="~/">
<meta property="og:title" content="Branch specific gitignores for Bioconductor package documentation">


  <link rel="canonical" href="https://lgatto.github.io/branch-specific-gitignore/">
  <meta property="og:url" content="https://lgatto.github.io/branch-specific-gitignore/">



  <meta property="og:description" content="For more background on this post, see thisthreadon the Bioc-devel mailing list. The short story is that I use HadleyWickham pkgdown package tobuild a website for my packages and then publish it on GitHub.">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-12-23T00:00:00+01:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Laurent Gatto",
      "url" : "https://lgatto.github.io",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://lgatto.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="~/ Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://lgatto.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://lgatto.github.io/">~/</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://lgatto.github.io/about/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://lgatto.github.io/year-archive/">Posts</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://lgatto.github.io/cbio-lab/">Lab</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="https://lgatto.github.io/images/lgatto2.jpg" class="author__avatar" alt="Laurent Gatto" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name">Laurent Gatto</h3>
    
      <p class="author__bio" itemprop="description">
        Open science, reproducible research, data champion, computational biology, proteomics, more omics, emacs, a lot of R, quite a bit of running, and parenting.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/lgatto" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->


  <!-- <li> -->
  <!--   <a href="http://dissem.in/r/6231/laurent-gatto" itemprop="sameAs"> -->
  <!--     <i class="fa fa-fw fa-pencil" aria-hidden="true"></i> dissem.in -->
  <!--   </a> -->
  <!-- </li> -->

  <li>
    <a href="https://codeberg.org/lgatto" itemprop="sameAs">
      <i class="fa fa-code" aria-hidden="true"></i> codeberg
    </a>
  </li>


  <li>
    <a href="https://orcid.org/0000-0002-1520-2268" itemprop="sameAs">
      <i class="fa fa-fw fa-pencil" aria-hidden="true"></i> ORCID
    </a>
  </li>

  <li>
    <a href="https://scholar.google.co.uk/citations?user=k5DrB74AAAAJ&hl=en" itemprop="sameAs">
      <i class="fa fa-fw fa-google" aria-hidden="true"></i> scholar
    </a>
  </li>


  <!-- <li> -->
  <!--   <a href="https://impactstory.org/u/0000-0002-1520-2268" itemprop="sameAs"> -->
  <!--     <i class="fa fa-fw fa-sun-o" aria-hidden="true"></i> Impactstory -->
  <!--   </a> -->
  <!-- </li> -->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Branch specific gitignores for Bioconductor package documentation">
    <meta itemprop="description" content="For more background on this post, see thisthreadon the Bioc-devel mailing list. The short story is that I use HadleyWickham pkgdown package tobuild a website for my packages and then publish it on GitHub.">
    <meta itemprop="datePublished" content="December 23, 2016">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Branch specific gitignores for Bioconductor package documentation
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  3 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>For more background on this post, see this
<a href="https://stat.ethz.ch/pipermail/bioc-devel/2016-December/010301.html">thread</a>
on the Bioc-devel mailing list. The short story is that I use Hadley
Wickham <a href="https://github.com/hadley/pkgdown"><code class="language-plaintext highlighter-rouge">pkgdown</code></a> package to
build a website for my packages and then publish it on GitHub.</p>

<p>The easiest is to create a <code class="language-plaintext highlighter-rouge">./docs</code> package directory that contains
the whole site and configure GitHub pages to use it directly to
produce, for example, the
<a href="http://lgatto.github.io/MSnbase/"><code class="language-plaintext highlighter-rouge">MSnbase</code></a> page.</p>

<p>The <code class="language-plaintext highlighter-rouge">./docs</code> directory ends in the package’s source which, on one hand
is nice as it simplifies tracking/committing of the site pages with
the package itself, but, on the other hand, the site also ends up on
the Bioconductor subversion server, where it doesn’t serve any purpose
other than taking space (5.5M in the case above).</p>

<!--more-->

<h2 id="ignoring-site-from-package-tarball">Ignoring site from package tarball</h2>

<p>It is straightforward to exclude the site’s <code class="language-plaintext highlighter-rouge">docs</code> directory in the
package tarball/zipfile by amending the <code class="language-plaintext highlighter-rouge">.Rbuildignore</code> file - adding
<code class="language-plaintext highlighter-rouge">docs</code> will do the trick.</p>

<h2 id="excluding-from-svn">Excluding from svn</h2>

<p>It is not straightforward, however, to ignore the <code class="language-plaintext highlighter-rouge">docs</code> directory on
the Bioconductor <code class="language-plaintext highlighter-rouge">hedgehog</code> subversion server if you use <code class="language-plaintext highlighter-rouge">git-svn</code> to
manage the GitHub and subversion repositories together.</p>

<p>Unfortunately, <code class="language-plaintext highlighter-rouge">git</code> doesn’t support branch-specific <code class="language-plaintext highlighter-rouge">.gitignore</code>
files or directives. Using different <code class="language-plaintext highlighter-rouge">.gitignore</code> files for different
branches requires a hack described
<a href="http://stackoverflow.com/questions/29579546/git-excludesfile-for-a-branch/29583813#29583813">here</a>. Here’s
how I have implemented it when documenting my Bioconductor packages
with <code class="language-plaintext highlighter-rouge">pkgdown</code>.</p>

<h3 id="define-files-to-ignore">Define files to ignore</h3>

<p>Instead of have a single static <code class="language-plaintext highlighter-rouge">.gitignore</code> files, we are going to
create as branch-specific files and one general file defining what to
ignore. They all come in a new <code class="language-plaintext highlighter-rouge">gitignores</code> directory. I choose to
name the general file <code class="language-plaintext highlighter-rouge">all</code> and the branch-specific ones using the
branch name (<code class="language-plaintext highlighter-rouge">devel</code> below).</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>tree .gitignores
.gitignores
├── all
└── devel</code></pre></figure>

<p>Each file contains exactly what a <code class="language-plaintext highlighter-rouge">.gitignore</code> file would contain.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cat</span> .gitignores/all 
Makefile
.gitignore
<span class="nv">$ </span><span class="nb">cat</span> .gitignores/devel 
docs</code></pre></figure>

<h3 id="dynamic-generation-of-gitignore">Dynamic generation of <code class="language-plaintext highlighter-rouge">.gitignore</code></h3>

<p>When I’m in <code class="language-plaintext highlighter-rouge">master</code>, I want my <code class="language-plaintext highlighter-rouge">.gitignore</code> file to list files in
<code class="language-plaintext highlighter-rouge">.gitignores/all</code> only. When I’m in <code class="language-plaintext highlighter-rouge">devel</code>, I want both files from
<code class="language-plaintext highlighter-rouge">.gitignores/all</code> and <code class="language-plaintext highlighter-rouge">.gitignores/devel</code> to be listed in
<code class="language-plaintext highlighter-rouge">.gitignore</code>. This can be achieved with a <code class="language-plaintext highlighter-rouge">post-checkout</code> hook, that
will be triggered after each <code class="language-plaintext highlighter-rouge">git checkout</code>. Mine is currently pretty
simple. I will always create a new <code class="language-plaintext highlighter-rouge">.gitignore</code> file from
<code class="language-plaintext highlighter-rouge">.gitignores/all</code> and will append the content of a file in
<code class="language-plaintext highlighter-rouge">.gitignores/</code> that matches the branch name.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cat</span> .git/hooks/post-checkout
<span class="c">#!/bin/bash</span>
<span class="c"># Copy in .git/hooks/post-checkout and make it executable</span>
<span class="nv">branch</span><span class="o">=</span><span class="si">$(</span>git rev-parse <span class="nt">--abbrev-ref</span> HEAD<span class="si">)</span>
<span class="nb">cat</span> .gitignores/all <span class="o">&gt;</span> .gitignore
<span class="k">if</span> <span class="o">[[</span> <span class="nt">-f</span> .gitignores/<span class="nv">$branch</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">cat</span> .gitignores/<span class="nv">$branch</span> <span class="o">&gt;&gt;</span> .gitignore<span class="p">;</span>
<span class="k">fi</span></code></pre></figure>

<h3 id="in-action">In action</h3>

<p>And …</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>git branch 
  devel
<span class="k">*</span> master
  release-3.0
  release-3.1
  release-3.2
  release-3.3
<span class="nv">$ </span><span class="nb">cat</span> .gitignore
Makefile
.gitignore
<span class="nv">$ </span>git checkout devel 
Switched to branch <span class="s1">'devel'</span>
Your branch and <span class="s1">'bioc/master'</span> have diverged,
and have 1754 and 12 different commits each, respectively.
  <span class="o">(</span>use <span class="s2">"git pull"</span> to merge the remote branch into yours<span class="o">)</span>
<span class="nv">$ </span><span class="nb">cat</span> .gitignore
Makefile
.gitignore
docs</code></pre></figure>

<p>I seems to work as expected.</p>

<p>I find this solution rather easy to implement. The major benefit is
that once it is in place, I can forget about it and things should work
irrespective of the <code class="language-plaintext highlighter-rouge">docs</code> directory.</p>

<h3 id="drawback">Drawback</h3>

<p>There is one drawback with this solution, however. When comparing the
<code class="language-plaintext highlighter-rouge">devel</code> and <code class="language-plaintext highlighter-rouge">master</code> branches with <code class="language-plaintext highlighter-rouge">git diff</code>, the ignored files are
still shown.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>git branch
<span class="k">*</span> devel
  master
  release-3.0
  release-3.1
  release-3.2
  release-3.3
<span class="nv">$ </span>git diff <span class="nt">--name-only</span> master | <span class="nb">head
</span>docs/articles/Bugs.md
docs/articles/Bugs.tex
docs/articles/Figures/MSnbase-io-in.png
docs/articles/Figures/MSnbase-io-in.tex
docs/articles/Figures/MSnbase-io-out.png
docs/articles/Figures/MSnbase-io-out.tex
docs/articles/Figures/itraqchem.pdf
docs/articles/Figures/msnset.png
docs/articles/Figures/plot2d-figure.png
docs/articles/Figures/plotDensity-figure.png</code></pre></figure>

<h2 id="other-possibilities">Other possibilities</h2>

<h3 id="orphan-branches">Orphan branches</h3>

<p>Robert M. Flight
<a href="https://stat.ethz.ch/pipermail/bioc-devel/2016-December/010308.html">suggested</a>
to use the good old original orphaned <code class="language-plaintext highlighter-rouge">gh-pages</code> branch solution.</p>

<h3 id="svn-ignore-property">svn ignore property</h3>

<p>If one doesn’t use <code class="language-plaintext highlighter-rouge">git-svn</code> and manages <code class="language-plaintext highlighter-rouge">git</code> and <code class="language-plaintext highlighter-rouge">svn</code>
independently, then setting the svn ignore property with</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">% svn propset svn:ignore docs .</code></pre></figure>

<p>should work. It doesn’t when managing both together.</p>

<h4 id="edit">Edit</h4>

<p>I suggest to add a header to <code class="language-plaintext highlighter-rouge">.gitignores</code> indicating that <code class="language-plaintext highlighter-rouge">gitignore</code>
is generated automatically and any updates will be overwritten.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">% <span class="nb">cat</span> .gitignores/all
<span class="c"># This is an automatically generated file. Ammend in .gitignores/ and</span>
<span class="c"># read  http://lgatto.github.io/branch-specific-gitignore/ for details</span>
Makefile
.gitignore</code></pre></figure>

<h4 id="edit-2">Edit 2</h4>

<p>And to ignore the <code class="language-plaintext highlighter-rouge">.gitignores</code> directory completely, suffices to add
it to the general <code class="language-plaintext highlighter-rouge">excludes</code> file. I prefer to keep it in <code class="language-plaintext highlighter-rouge">git</code> (but
not svn, and ignore it when building the package bundle) to keep track
from what I ignore.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cat</span> .git/info/exclude
<span class="c"># git ls-files --others --exclude-from=.git/info/exclude</span>
<span class="c"># Lines that start with '#' are comments.</span>
<span class="c"># For a project mostly in C, the following would be a good set of</span>
<span class="c"># exclude patterns (uncomment them if you want to use them):</span>
<span class="c"># *.[oa]</span>
<span class="c"># *~</span>
.gitignores</code></pre></figure>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://lgatto.github.io/tags/#git" class="page__taxonomy-item" rel="tag">git</a><span class="sep">, </span>
    
      
      
      <a href="https://lgatto.github.io/tags/#programming" class="page__taxonomy-item" rel="tag">programming</a><span class="sep">, </span>
    
      
      
      <a href="https://lgatto.github.io/tags/#svn" class="page__taxonomy-item" rel="tag">svn</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-12-23T00:00:00+01:00">December 23, 2016</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="https://lgatto.github.io/msnbase-contribs/" class="pagination--pager" title="MSnbase contributors 2010 - 2016 2017
">Previous</a>
    
    
      <a href="https://lgatto.github.io/software-data-papers/" class="pagination--pager" title="Why Software and data papers are a bad solution to a real problem
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">You May Also Enjoy</h4>
      
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://lgatto.github.io/assets/images/slide-code.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://lgatto.github.io/death-research-software/" rel="permalink">The tragic death of open source research software
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  8 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">This post is a write up of my contribution to the Fast forward Open
Science event organised by Circle U. I’ll be sharing some thoughts
about research softwar...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://lgatto.github.io/assets/images/slide-code.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://lgatto.github.io/EuroBioc-Barcelona/" rel="permalink">CBIO’s EuroBioc2025 posters and talks
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  7 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Before I forget posting this year’s lab EuroBioc contribution, here
are the abstract of the work we will present at the EuroBioc2025 in
Barcelona

</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://lgatto.github.io/assets/images/slide-code.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://lgatto.github.io/EuroBioc-Oxford/" rel="permalink">CBIO’s EuroBioc2024 posters and talks
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  11 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">The lab is preparing for EuroBioc2025 in
Barcelona, and I realise that
I forgot to post our contributions to EuroBioc2024 in
Oxford. So here they are
(with p...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://lgatto.github.io/assets/images/slide-code.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://lgatto.github.io/neil-postman-six-question-technology/" rel="permalink">6 Questions We Should Ask Before Adopting a New Technology
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">I stumbled across this
message
on mastodon, that directed me to 6 questions what one should ask
before adopting a new technology. These questions where posed...</p>
  </article>
</div>
        
      </div>
    </div>
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/lgatto"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://lgatto.github.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 Laurent Gatto CC-BY. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="https://lgatto.github.io/assets/js/main.min.js"></script>





  </body>
</html>
